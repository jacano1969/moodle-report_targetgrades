<div class="highlight"><pre><a name="l-1"></a><span class="cp">&lt;?php</span> 
<a name="l-2"></a><span class="nv">$dir</span> <span class="o">=</span> <span class="nb">scandir</span><span class="p">(</span><span class="s1">&#39;../&#39;</span><span class="p">);</span>
<a name="l-3"></a><span class="nb">sort</span><span class="p">(</span><span class="nv">$dir</span><span class="p">);</span>
<a name="l-4"></a><span class="k">foreach</span> <span class="p">(</span><span class="nv">$dir</span> <span class="k">as</span> <span class="nv">$d</span><span class="p">)</span> <span class="p">{</span>
<a name="l-5"></a>    <span class="nv">$fileinfo</span> <span class="o">=</span> <span class="nb">pathinfo</span><span class="p">(</span><span class="nv">$d</span><span class="p">);</span>
<a name="l-6"></a>    <span class="k">if</span> <span class="p">(</span><span class="nb">is_file</span><span class="p">(</span><span class="s1">&#39;../&#39;</span><span class="o">.</span><span class="nv">$d</span><span class="p">))</span> <span class="p">{</span>
<a name="l-7"></a>        <span class="k">if</span> <span class="p">(</span><span class="nv">$d</span> <span class="o">!=</span> <span class="s1">&#39;index.html&#39;</span> <span class="o">&amp;&amp;</span> <span class="nv">$fileinfo</span><span class="p">[</span><span class="s1">&#39;extension&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;html&#39;</span><span class="p">)</span> <span class="p">{</span>
<a name="l-8"></a>            <span class="nv">$contents</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="s1">&#39;../&#39;</span><span class="o">.</span><span class="nv">$d</span><span class="p">);</span>
<a name="l-9"></a>            <span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/&lt;h2&gt;(.+?)&lt;\/h2&gt;/&#39;</span><span class="p">,</span> <span class="nv">$contents</span><span class="p">,</span> <span class="nv">$matches</span><span class="p">);</span>            
<a name="l-10"></a>            <span class="k">echo</span> <span class="s1">&#39;&lt;li&gt;&lt;a href=&quot;&#39;</span><span class="o">.</span><span class="nv">$fileinfo</span><span class="p">[</span><span class="s1">&#39;basename&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&quot;&gt;&#39;</span><span class="o">.</span><span class="nv">$matches</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;&lt;/a&gt;&lt;/li&gt;&#39;</span><span class="o">.</span><span class="nx">PHP_EOL</span><span class="p">;</span>
<a name="l-11"></a>        <span class="p">}</span>
<a name="l-12"></a>    <span class="p">}</span>
<a name="l-13"></a><span class="p">}</span>
<a name="l-14"></a><span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
